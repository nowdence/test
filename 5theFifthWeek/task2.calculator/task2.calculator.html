<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>task2.calculator</title>
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/calculator.css" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="table-responsive">
            <table class="table table-condensed">
                <!--显示结果行-->
                <tr class="active">
                    <td colspan="4">
                        <input class="btn btn-default" id="inp1" type="text" value="" name="xianshi" />
                    </td>
                </tr>
                <!--第一行-->
                <tr class="active">
                    <td class="success" colspan="2">
                        <input class="btn btn-warning" type="button" value="Square" onclick="inputPCB(this)" />
                    </td>
                    <td class="success" colspan="2">
                        <input class="btn btn-warning" type="button" value="Clear" onclick="inputPCB(this)" />
                    </td>
                </tr>
                <!--第二行-->
                <tr class="active">
                    <td class="success">
                        <input class="btn btn-success" type="button" value="+" onclick="inputOper(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-success" type="button" value="-" onclick="inputOper(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-success" type="button" value="*" onclick="inputOper(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-success" type="button" value="/" onclick="inputOper(this)" />
                    </td>
                </tr>
                <!--第三行-->
                <tr class="active">
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="1" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="2" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="3" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="4" onclick="inputEvent(this)" />
                    </td>
                </tr>
                <!--第四行-->
                <tr class="active">
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="5" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="6" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="7" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="8" onclick="inputEvent(this)" />
                    </td>
                </tr>
                <!--第五行-->
                <tr class="active">
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="9" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="0" onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-primary" type="button" value="." onclick="inputEvent(this)" />
                    </td>
                    <td class="success">
                        <input class="btn btn-danger" type="button" value="=" onclick="inputEquel(this)" />
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script type="text/javascript">
    /* 定义一个Calculator类*/
    function Calculator() {

        this.jisuan = function(num1, num2, oper) {
            var res = 0;
            switch (oper) {
                case "+":
                    res = num1 + num2;
                    break;
                case "-":
                    res = num1 - num2;
                    break;
                case "*":
                    res = num1 * num2;
                    break;
                case "/":
                    res = num1 / num2;
                    break;
            }
            return res;
        }
    }
    //创建对象
    var calculator = new Calculator();
    /*定义全局变量*/
    var val = 0; //放置输入的值
    var xval = 0; //保存转换Number类型的值
    var temp = 0; //保存第一次输入的值    
    var oper = ""; //保存输入的操作符
    /*获取输入数字*/
    function inputEvent(e) {

        val = e.value
        var xsval = document.getElementById("inp1");
        xsval.value += val; //连续输入数字(String类型)
        //转换Number类型
        xval = parseFloat(xsval.value);

    }
    /*获取第一行的数据*/
    function inputPCB(e) {
        //window.alert(e.value);
        var xsval = document.getElementById("inp1");
        if (e.value == "Clear") {
            xsval.value = "";
        } else if (e.value == "Square") {
            //计算平方
            xsval.value = Math.pow(xsval.value, 2);
        }
    }
    /*输入操作符*/
    function inputOper(e) {
        oper = e.value;
        //window.alert(typeof oper);
        //oper=oper.substr(0);
        if (e.value == "+") {
            var xsval = document.getElementById("inp1");
            //保存上次计算结果，并对字符串进行转换Number类型
            temp = parseFloat(xsval.value);
            //第一次输入的值设置为空
            xsval.value = "";
        } else if (e.value == "-") {
            var xsval = document.getElementById("inp1");
            temp = parseFloat(xsval.value);
            xsval.value = "";
        } else if (e.value == "*") {
            var xsval = document.getElementById("inp1");
            temp = parseFloat(xsval.value);
            xsval.value = "";
        } else if (e.value == "/") {
            var xsval = document.getElementById("inp1");
            temp = parseFloat(xsval.value);
            xsval.value = "";
        }
    }
    /*计算结果*/
    function inputEquel(e) {
        var xsval = document.getElementById("inp1");
        if (e.value == "=") {
            xsval.value = temp+oper+xval+"="+calculator.jisuan(temp, xval, oper);
        }
    }
    </script>
</body>

</html>
